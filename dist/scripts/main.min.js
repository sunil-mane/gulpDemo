angular.module("demoApp",["ui.router","ngStorage"]),angular.module("demoApp").run(function(e,t,o){e.$on("$stateChangeStart",function(e,r,l,n,u){r.authenticate&&!o.isLogedin()&&(t.go("login"),e.preventDefault())})}),angular.module("demoApp").config(function(e,t){t.otherwise("/login"),e.state("login",{authenticate:!1,url:"/login",templateUrl:"js/view/login/login.html",controller:"loginCtrl"}).state("home",{authenticate:!0,url:"/home",templateUrl:"js/view/home/home.html",controller:"homeCtrl"}).state("home.customers",{authenticate:!0,url:"/customers",templateUrl:"js/view/customer/customers.html",controller:"customerCtrl"}).state("home.users",{authenticate:!0,url:"/users",templateUrl:"js/view/user/users.html",controller:"userCtrl"}).state("home.products",{authenticate:!0,url:"/products",templateUrl:"js/view/product/products.html",controller:"productCtrl"}).state("logout",{authenticate:!1,url:"/logout",controller:function(e,t){t.logout()&&e.go("login")}})}),angular.module("demoApp").factory("customerService",function(e){return{getCustomers:function(){return e.get("http://www.w3schools.com/angular/customers.php")}}}),angular.module("demoApp").factory("loginService",function(e,t){return{login:function(o){return o.remember?(e.email=o.email,e.password=o.password):(delete e.email,delete e.password),t.userEmail=o.email,!0},getRemember:function(){return e.email?{email:e.email,password:e.password,remember:!0}:{}},isLogedin:function(){return!!t.userEmail},logout:function(){return console.log("logout..."),delete t.userEmail,!0},getUserEmail:function(){return t.userEmail?t.userEmail:"Guest"}}}),function(){"use strict";angular.module("demoApp").factory("userService",function(e){function t(){return e.get("api/users")}return{getUsers:t}})}(),angular.module("demoApp").controller("customerCtrl",function(e,t){t.getCustomers().then(function(t){e.customers=t.data.records,console.log(e.customers)}).catch(function(e){console.log("Error : "+e)})}),angular.module("demoApp").controller("homeCtrl",function(e,t){e.user=t.getUserEmail()}),angular.module("demoApp").controller("loginCtrl",function(e,t,o){e.loginObj=o.getRemember(),e.login=function(){o.login(e.loginObj)?t.go("home"):t.go("login")}}),angular.module("demoApp").controller("productCtrl",function(e,t){}),angular.module("demoApp").controller("userCtrl",["$scope","userService",function(e,t){t.getUsers().then(function(t){e.users=t.data}).catch(function(e){console.log("Error : "+e)})}]);